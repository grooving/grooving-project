{"remainingRequest":"/home/reik/Grooving/grooving-project/grooving-client/node_modules/babel-loader/lib/index.js!/home/reik/Grooving/grooving-project/grooving-client/node_modules/eslint-loader/index.js??ref--13-0!/home/reik/Grooving/grooving-project/grooving-client/src/security/GSecurity.js","dependencies":[{"path":"/home/reik/Grooving/grooving-project/grooving-client/src/security/GSecurity.js","mtime":1553857854973},{"path":"/home/reik/Grooving/grooving-project/grooving-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/reik/Grooving/grooving-project/grooving-client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/reik/Grooving/grooving-project/grooving-client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _JSON$stringify from \"/home/reik/Grooving/grooving-project/grooving-client/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es7.array.includes\";\nimport _classCallCheck from \"/home/reik/Grooving/grooving-project/grooving-client/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/reik/Grooving/grooving-project/grooving-client/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport endpoints from '../utils/endpoints.js';\nimport GAxios from '../utils/GAxios.js';\nvar ROLES = ['ANONYMOUS', 'ARTIST', 'CUSTOMER'];\nvar CUSTOMER_ACCOUNT_CREDENTIALS = 'pug';\nvar ARTIST_ACCOUNT_CREDENTIALS = 'rosalia';\n\nvar GSecurity =\n/*#__PURE__*/\nfunction () {\n  function GSecurity() {\n    var username = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'anonymous';\n    var role = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'anonymous';\n    var token = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n    _classCallCheck(this, GSecurity);\n\n    this._username = username;\n\n    if (role != undefined && ROLES.includes(role.toUpperCase())) {\n      this._role = role.toUpperCase();\n    }\n\n    this._token = token;\n    this._photo = '';\n    this._id = '';\n    this._firstName = '';\n  }\n\n  _createClass(GSecurity, [{\n    key: \"getRole\",\n    value: function getRole() {\n      return this._role;\n    }\n  }, {\n    key: \"getPhoto\",\n    value: function getPhoto() {\n      return this._photo;\n    }\n  }, {\n    key: \"getFirstName\",\n    value: function getFirstName() {\n      return this._firstName;\n    }\n  }, {\n    key: \"authenticate\",\n    value: function authenticate(username, password) {\n      var _this = this;\n\n      var res = false;\n      GAxios.post(endpoints.login, {\n        \"username\": username,\n        \"password\": password\n      }).then(function (response) {\n        console.log(response);\n\n        if (response.data.artist != undefined) {\n          _this._username = response.data.artist.user.username;\n          _this._role = 'ARTIST';\n          _this._id = response.data.artist.id;\n          _this._photo = response.data.artist.photo;\n          _this._firstName = response.data.artist.user.first_name;\n        } else {\n          _this._username = response.data.customer.user.username;\n          _this._role = 'CUSTOMER';\n          _this._id = response.data.customer.id;\n          _this._photo = response.data.customer.photo;\n          _this._firstName = response.data.customer.user.first_name;\n        }\n\n        _this._token = response.headers['x-auth'];\n        res = true;\n      }).catch(function (ex) {\n        console.log(ex);\n        res = false;\n      });\n      return res;\n    }\n  }, {\n    key: \"deauthenticate\",\n    value: function deauthenticate() {\n      this._username = 'anonymous';\n      this._role = 'ANONYMOUS';\n      this._token = '';\n    }\n  }, {\n    key: \"isAuthenticated\",\n    value: function isAuthenticated() {\n      return this._token != undefined && this._token.length > 0;\n    }\n  }, {\n    key: \"isAnonymous\",\n    value: function isAnonymous() {\n      return this._token != undefined && this._token.length <= 0;\n    }\n  }, {\n    key: \"hasRole\",\n    value: function hasRole(role) {\n      if (role != undefined && ROLES.includes(role.toUpperCase())) {\n        return this._role.toUpperCase() === role.toUpperCase();\n      } else return false;\n    }\n  }, {\n    key: \"setRole\",\n    value: function setRole(role) {\n      console.log('Debug only... Remove this method');\n\n      if (role != undefined && ROLES.includes(role.toUpperCase())) {\n        this._role = role;\n        return true;\n      } else return false;\n    }\n  }]);\n\n  return GSecurity;\n}();\n\nvar instance = new GSecurity();\n\nvar jsonInstance = _JSON$stringify(instance);\n\nwindow.alert(jsonInstance);\nwindow.localStorage.setItem(\"instance\", jsonInstance);\nexport default instance;",{"version":3,"sources":["/home/reik/Grooving/grooving-project/grooving-client/src/security/GSecurity.js"],"names":["endpoints","GAxios","ROLES","CUSTOMER_ACCOUNT_CREDENTIALS","ARTIST_ACCOUNT_CREDENTIALS","GSecurity","username","role","token","_username","undefined","includes","toUpperCase","_role","_token","_photo","_id","_firstName","password","res","post","login","then","response","console","log","data","artist","user","id","photo","first_name","customer","headers","catch","ex","length","instance","jsonInstance","window","alert","localStorage","setItem"],"mappings":"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","sourcesContent":["import endpoints from '../utils/endpoints.js';\nimport GAxios from '../utils/GAxios.js'\n\nconst ROLES = ['ANONYMOUS', 'ARTIST', 'CUSTOMER'];\nconst CUSTOMER_ACCOUNT_CREDENTIALS = 'pug';\nconst ARTIST_ACCOUNT_CREDENTIALS = 'rosalia';\n\nclass GSecurity {\n\n    constructor(username = 'anonymous', role = 'anonymous', token = ''){\n\n      this._username = username;\n\n      if (role != undefined && ROLES.includes(role.toUpperCase())){\n        this._role = role.toUpperCase();\n      }\n\n      this._token = token;\n      this._photo = '';\n      this._id = '';\n      this._firstName = '';\n\n    }\n\n    getRole(){\n        return this._role;\n    }\n\n    getPhoto() {\n        return this._photo;\n    }\n\n    getFirstName() {\n        return this._firstName;\n    }\n\n    authenticate(username, password){\n\n        var res = false;\n\n        GAxios.post(endpoints.login, {\n            \"username\": username,\n            \"password\": password\n          }).then(response => {\n\n            console.log(response)\n\n                if(response.data.artist != undefined){\n                    this._username = response.data.artist.user.username;\n                    this._role = 'ARTIST';\n                    this._id = response.data.artist.id;\n                    this._photo = response.data.artist.photo;\n                    this._firstName = response.data.artist.user.first_name;\n                }else{\n                    this._username = response.data.customer.user.username;\n                    this._role = 'CUSTOMER';\n                    this._id = response.data.customer.id;\n                    this._photo = response.data.customer.photo;\n                    this._firstName = response.data.customer.user.first_name;\n                }\n\n                this._token = response.headers['x-auth'];\n\n                res = true;\n\n              }).catch(ex => {\n                console.log(ex);\n                res = false;\n              });\n\n        return res;\n    }\n\n    deauthenticate(){\n        this._username = 'anonymous';\n        this._role = 'ANONYMOUS';\n        this._token = '';\n    }\n\n    isAuthenticated(){\n        return this._token != undefined && this._token.length > 0;\n    }\n\n    isAnonymous(){\n        return this._token != undefined && this._token.length <= 0;\n    }\n\n    hasRole(role){\n\n        if(role != undefined && ROLES.includes(role.toUpperCase())){\n            return this._role.toUpperCase() === role.toUpperCase();\n        }\n        else\n            return false;\n    }\n\n    setRole(role){\n        console.log('Debug only... Remove this method')\n        if(role != undefined && ROLES.includes(role.toUpperCase())){\n            this._role = role;\n            return true;\n        }\n        else\n            return false;\n    }\n\n  }\n\n  const instance = new GSecurity();\n  var jsonInstance = JSON.stringify(instance)\n  window.alert(jsonInstance)\n  window.localStorage.setItem(\"instance\",jsonInstance);\n  export default instance;\n"]}]}